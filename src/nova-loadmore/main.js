(function(){(function(){(function(){(function(e,t){if(typeof exports=="object")module.exports=t();else if(typeof define=="function"&&define.amd)define("src/nova-swipable/main",[],t);else{var n="__1",r=n.split("."),i=e;for(var s=0;s<r.length-1;s++)i[r[s]]===undefined&&(i[r[s]]={}),i=i[r[s]];i[r[r.length-1]]=t()}})(this,function(){function e(e){return{}[e]}function t(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||e.OLink===""&&["","o"])[1],n="WebKit|Moz|MS|O".match(new RegExp("("+t+")","i"))[1];return{dom:n,lowercase:t,css:"-"+t+"-",js:t}}function n(){var e=document.createElement("p"),t;return document.body.insertBefore(e,null),e.style[u]!=undefined&&(e.style[u]="translate3d(1px, 1px, 1px)",t=window.getComputedStyle(e).getPropertyValue(u)),document.body.removeChild(e),t!==undefined&&t.length>0&&t!=="none"}function r(e,t,n){var r=Date.now();return t=t||100,function(){var i=Date.now();if(i-r<t){n&&n.apply(this,arguments);return}r=i,e.apply(this,arguments)}}var i=undefined;NovaExports.__fixedUglify="script>",NovaExports.exports={stylesheet:":host{display:block}",template:"\n    "};var s=t(),o=window.requestAnimationFrame||window[s.js+"requestAnimationFrame"]||function(e){setTimeout(e,1e3/60)},u=s.css+"transform",a,f=325,l;return Nova.Components.NovaSwipable=NovaExports({is:"nova-swipable",props:{direction:{type:String,value:"vertical"},speed:{type:Number,value:.5}},createdHandler:function(){var e=this;a===undefined&&(a=n()),this.isVertical=this.direction==="vertical"?1:0,this.$element=$(this),this.$view=this.$element.children(),this.min=this.isVertical?this.$element.height()-this.$view.height():this.$element.width()-this.$view.width(),this.max=0;if(this.min>=0)return;this._initEvents(),$(window).on("resize",function(){e.refresh()})},refresh:function(){this.min=this.isVertical?this.$element.height()-this.$view.height():this.$element.width()-this.$view.width(),this.max=0,this.offset!==undefined&&(this.offset>this.max&&this._scroll(this.max),this.offset<this.min&&this._scroll(this.min))},_initEvents:function(){function e(e){l||(l=!0,p=undefined,E=0,S=0,y=a._pos(e),b=e.touches[0].clientX,w=e.touches[0].clientY,h.on("touchmove",T),h.on("touchend",n),h.on("touchcancel",n),v=a.offset,m=(new Date).getTime(),d=0,g=0)}function t(e){var t=e.touches[0].clientX,n=e.touches[0].clientY,r,s;if(a.isVertical)e.preventDefault();else{p===undefined&&(p=Math.abs(n-w)>Math.abs(t-b)?1:0);if(p===1)return;e.preventDefault()}a.trigger("nDrag"),r=a._pos(e),S=n-w,E=t-b,s=r-y,y=r;if(a.offset<a.min||a.offset>a.max)s/=4;a._scroll(a.offset+s),i()}function n(e){l=!1;var t,r=e.touches[0];h.off("touchmove",T),h.off("touchend",n),h.off("touchcancel",n),a.trigger("nRelease");if(a.offset<a.min||a.offset>a.max)x=a.offset<a.min?a.min:a.max,g=x-a.offset,m=(new Date).getTime(),o(u);else if(Math.abs(d)>80){g=a.speed*d,x=Math.round(a.offset+g),m=(new Date).getTime(),o(s);if(x<a.min||x>a.max)t=x<a.min?a.min:a.max}(Math.abs(E)>5||Math.abs(S)>5)&&e.preventDefault()}function i(){var e=(new Date).getTime(),t=a.offset-v,n=e-m,r=1e3*t/(1+n);d=.05*d+.95*r,v=a.offset,m=e}function s(){var e,t,n,r;if(g){e=(new Date).getTime()-m,t=-g*Math.exp(-e/f);if(Math.abs(t)>.5){if(a.offset>a.max||a.offset<a.min){n=x<a.min?a.min:a.max,r=Math.round(n+(x-n)/8);if(Math.abs(x+t)>Math.abs(r)){x=a.offset<a.min?a.min:a.max,g=x-a.offset,m=(new Date).getTime(),o(u);return}}a._scroll(x+t),o(s)}else a._scroll(x)}}function u(){var e,t;g&&(e=(new Date).getTime()-m,t=-g*Math.exp(-e/100),Math.abs(t)>.5?(a._scroll(x+t),o(u)):a._scroll(x))}var a=this,c=a.$element,h=$("body"),p,d,v,m,g,y,b,w,E,S,x;a.offset=0,c.on("touchstart",e);var T=r(t,1e3/70)},_scroll:function(e){var t=this;t.offset=e;if(a){var n=t.isVertical?"translate3d(0, "+t.offset+"px, 0)":"translate3d("+t.offset+"px, 0, 0)";t.$view.css({"-webkit-transform":n})}else{var n=t.isVertical?"translateY":"translateX";t.$view.css(u,n+"("+t.offset+"px)")}},_pos:function(e){return this.isVertical?e.touches[0].clientY:e.touches[0].clientX}}),i})}).call(window)})(),function(){(function(e,t){if(typeof exports=="object")module.exports=t(require("src/nova-swipable/main"));else if(typeof define=="function"&&define.amd)define("src/nova-loadmore/main",["src/nova-swipable/main"],t);else{var n="__0",r=n.split("."),i=e;for(var s=0;s<r.length-1;s++)i[r[s]]===undefined&&(i[r[s]]={}),i=i[r[s]];i[r[r.length-1]]=t(e._1)}})(this,function(e){function t(t){return{"src/nova-swipable/main":e}[t]}var n=undefined;return NovaExports.__fixedUglify="script>",NovaExports.exports={stylesheet:":host{display:block}",template:'\n        <div class="hint pre">{{_prehint}}</div>\n        <content></content>\n        <div class="hint next">{{_nexthint}}</div>\n    '},Nova.Components.NovaLoadmore=NovaExports({is:"nova-loadmore",behaviors:[Nova.Components.NovaSwipable],props:{threshold:{type:Number,value:50},showNextHint:{type:Boolean,value:!0},showPreHint:{type:Boolean,value:!1},mode:{type:String,value:"append"},page:{type:Number,value:1},hintContent:{type:Object,value:function(){return{firstPageText:"当前页为第一页",lastPageText:"当前页为最后一页",hintLoading:"加载中",nextPageHintDefault:"上拉加载第{$pn}页",nextPageHintPrepare:"释放加载第{$pn}页",prePageHintDefault:"下拉加载第{$pn}页",prePageHintPrepare:"释放加载第{$pn}页"}}},isLastPage:{type:Boolean,value:!1},_prehint:String,_nexthint:String},createdHandler:function(){this.isLoading=!1,this.hintContent=this.hintContent,this.initialized=!1,this._prehint=this.hintContent.firstPageText;var e=this.isLastPage?this.hintContent.lastPageText:this.hintContent.nextPageHintDefault.replace("{$pn}",2);this._nexthint=e,this.s=this,this.s.$view=this.$element.children(),this.s.min=this._getMin(),this.s.max=this.showPreHint?0:-this.$element.find(".hint.pre").height();if(this.s.min>=0){this.$element.find(".hint").hide(),this.s.min=this._getMin(),this.initialized=!1;return}this._init()},_getMin:function(){var e=this.s.isVertical?this.$element.height()-this._getContentSize("height"):this.$element.width()-this._getContentSize("width");return this.showNextHint||(e+=this.$element.find(".hint.next").height()),e},_getContentSize:function(e){var t=0;for(var n=0;n<this.s.$view.length;n++)t+=this.s.$view.eq(n)[e]();return t},_init:function(){this.s._initEvents(),this._initHandlers(),this.showPreHint||this.s._scroll(this.s.max),$(window).on("resize",this.refresh)},refresh:function(){this.initialized||(this._init(),this.initialized=!0),this._changeHintCont("Default"),this.isLoading=!1,this.mode=="replace"?this.s._scroll(this.s.max):this.mode=="append"&&this.page!==1&&this.s._scroll(this.s.min-this.threshold),this.s.min=this._getMin()},prePage:function(){this.page=this.page-1,this.isLastPage=!1,this._changeHintCont("Loading","pre")},nextPage:function(){this.page=this.page+1,this._changeHintCont("Loading","next")},_changeHintCont:function(e,t){if(e=="Loading"){t==="pre"&&this.mode=="replace"?this._prehint=this.hintContent.hintLoading:t==="next"&&(this._nexthint=this.hintContent.hintLoading),this.isLoading=!0;return}this.mode=="replace"&&(this._prehint=this.hintContent["prePageHint"+e]),this._nexthint=this.hintContent["nextPageHint"+e],e!=="Loading"&&(this.mode=="replace"&&(this._prehint=this.hintContent["prePageHint"+e].replace("{$pn}",this.page-1)),this._nexthint=this.hintContent["nextPageHint"+e].replace("{$pn}",this.page+1)),this.isLastPage&&(this._nexthint=this.hintContent.lastPageText),this.page<=1&&this.mode=="replace"&&(this._prehint=this.hintContent.firstPageText)},_initHandlers:function(){var e=this;e.on("_isLastPageChanged",function(){e._changeHintCont("Default")}),e.s.on("nDrag",function(t){e.isLoading||(e.s.offset+e.threshold<e.s.min?e._changeHintCont("Prepare"):e.s.offset<e.s.min&&e._changeHintCont("Default"),e.s.offset-e.threshold>e.s.max?e._changeHintCont("Prepare"):e.s.offset>e.s.max&&e._changeHintCont("Default"))}),e.s.on("nRelease",function(t){e.s.offset+e.threshold<e.s.min&&!e.isLoading&&!e.isLastPage&&e.nextPage(),e.page>1&&e.mode=="replace"&&e.s.offset-e.threshold>e.s.max&&!e.isLoading&&e.prePage()})}}),n})}.call(window)})();